###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.40.4.54170/W32 for ARM     02/Jul/2013  21:36:45 #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\app\util\ #
#                    security\security-common.c                               #
#    Command line =  F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\app\util\ #
#                    security\security-common.c -D DEBUG -D                   #
#                    "BOARD_HEADER=\"hal/micro/cortexm3/em35x/board/dev0680.h #
#                    \"" -D "PLATFORM_HEADER=\"hal/micro/cortexm3/compiler/ia #
#                    r.h\"" -D HAL_MICRO -D CORTEXM3 -D CORTEXM3_EM357 -D     #
#                    PHY_EM3XX -D BOARD_DEV0680 -D                            #
#                    "CONFIGURATION_HEADER=\"app/sensor/sensor-configuration. #
#                    h\"" -D SINK_APP -D EMBER_SERIAL1_MODE=EMBER_SERIAL_FIFO #
#                     -D EMBER_SERIAL1_TX_QUEUE_SIZE=128 -D                   #
#                    EMBER_SERIAL1_RX_QUEUE_SIZE=16 -D EMBER_SERIAL0_DEBUG    #
#                    -D EMBER_SERIAL0_MODE=EMBER_SERIAL_FIFO -D               #
#                    EMBER_SERIAL0_TX_QUEUE_SIZE=128 -D                       #
#                    EMBER_SERIAL0_RX_QUEUE_SIZE=64 -D                        #
#                    SCAN_DEBUG_PRINT_ENABLE -D USE_BOOTLOADER_LIB -D         #
#                    "__SOURCEFILE__=\"security-common.c\"" -lC               #
#                    F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\build\sin #
#                    k-cortexm3-iar-em357-em3xx-dev0680-debug\Lst\            #
#                    --diag_suppress Pa050 -o F:\Firmware\emberZNet\firmware\ #
#                    EmberZNet\EM35x\build\sink-cortexm3-iar-em357-em3xx-dev0 #
#                    680-debug\Obj\ --debug --endian=little --cpu=Cortex-M3   #
#                    -e --fpu=None --dlib_config "D:\Program Files\IAR        #
#                    Systems\Embedded Workbench 6.4\arm\INC\c\DLib_Config_Nor #
#                    mal.h" -I F:\Firmware\emberZNet\firmware\EmberZNet\EM35x #
#                    \app\util\security\ -I F:\Firmware\emberZNet\firmware\Em #
#                    berZNet\EM35x\app\sensor\ewb-em357\..\..\..\ -I          #
#                    F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\app\senso #
#                    r\ewb-em357\..\..\..\STACK\ -I                           #
#                    F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\app\senso #
#                    r\ewb-em357\..\..\..\HAL\ -I                             #
#                    F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\app\senso #
#                    r\ewb-em357\..\..\..\ -Ohz --use_c++_inline              #
#    List file    =  F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\build\sin #
#                    k-cortexm3-iar-em357-em3xx-dev0680-debug\Lst\security-co #
#                    mmon.lst                                                 #
#    Object file  =  F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\build\sin #
#                    k-cortexm3-iar-em357-em3xx-dev0680-debug\Obj\security-co #
#                    mmon.o                                                   #
#                                                                             #
#                                                                             #
###############################################################################

F:\Firmware\emberZNet\firmware\EmberZNet\EM35x\app\util\security\security-common.c
      1          // *******************************************************************
      2          //  security-common.c
      3          //
      4          //  Common functions for manipulating security for Trust Center and
      5          //  non Trust Center devices.
      6          //
      7          //  Copyright 2008 by Ember Corporation. All rights reserved.              *80*
      8          // *******************************************************************
      9          
     10          //------------------------------------------------------------------------------
     11          // INCLUDES
     12          
     13          #include PLATFORM_HEADER //compiler/micro specifics, types
     14          
     15          #if defined EZSP_HOST
     16            #include "stack/include/ember-types.h"
     17            #include "stack/include/error.h"
     18          
     19            #include "app/util/ezsp/ezsp-protocol.h"
     20            #include "app/util/ezsp/ezsp.h"
     21            #include "app/util/ezsp/ezsp-utils.h"
     22          
     23            #define emberKeyContents(key) ((key)->contents)
     24          
     25          #else // Stack App
     26            #include "stack/include/ember.h"
     27          #endif
     28          
     29          //------------------------------------------------------------------------------
     30          
     31          #if defined EZSP_HOST
     32          boolean emberHaveLinkKey(EmberEUI64 remoteDevice)
     33          {
     34            EmberKeyStruct keyStruct;
     35          
     36            // Check and see if the Trust Center is the remote device first.
     37            if (EMBER_SUCCESS == emberGetKey(EMBER_TRUST_CENTER_LINK_KEY, &keyStruct)) {
     38              if (0 == MEMCOMPARE(keyStruct.partnerEUI64, remoteDevice, EUI64_SIZE)) {
     39                return TRUE;
     40              }
     41            }
     42          
     43            return (0xFF != emberFindKeyTableEntry(remoteDevice, 
     44                                                   TRUE));        // look for link keys?
     45          }
     46          #endif


 

 


Errors: none
Warnings: none
